name: PHP Composer

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

permissions:
  contents: read

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    # - run: sshpass -p "Vnwd5PHHb" ssh -p 9020 root@103.173.154.181 'echo 123'
    - name: Deploy source-code
      uses: appleboy/ssh-action@v0.1.10
      env:
          HOST: 103.173.154.181
          USERNAME: root
          PORT: 9020
          KEY: ${{ secrets.SSH_PRIVATE_KEY }}
      with:
        source: "*"
        target: "/usr/src/"